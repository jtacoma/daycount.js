<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>daycount.js: explorer</title>
    <link rel="stylesheet" href="/media/css/reset-fonts-grids.css" />
    <link rel="stylesheet" href="/media/css/base.css">
    <style type="text/css">
      table#data {
        border-width: 1px;
        border-style: outset;
        border-color: gray;
        border-collapse: separate;
      }
      table#data th {
        border-width: 1px;
        padding: 1px;
        border-style: inset;
        border-color: gray;
      }
      table#data td {
        border-width: 1px;
        padding: 1px;
        border-style: inset;
        border-color: gray;
      }
      table#data tr.odd {
        background: #ccc;
      }
    </style>
  </head>
  <body>
    <div id="doc3">
      <div id="hd">
        <p>
          Input a starting date and a number of days forward to calculate.
          The date must be specified in the Gregorian (e.g. 2012-12-21), local Julian Day (e.g. LJD:2456283), or Long (e.g. 13.0.0.0.0) count.
          The number of days to calculate is capped at 1000 to keep your browser from becoming unresponsive (it's performing these calculations on your computer).
          Please report bugs and inaccuracies, suggest new features, or comment on others' suggestions
          in the <a href="https://github.com/jtacoma/daycount.js/issues">issue tracker</a>,
          or just <a href="mailto:joshua@yellowseed.org">email me</a>.
        </p>
        <input id="start" />
        <input type="radio" name="direction" id="past" value="past"><label for="past">Past</label>
        <input type="radio" name="direction" id="future" value="future" checked="checked"><label for="future">Future</label>
      </div>
      <div id="bd">
        <table id="data">
          <thead>
            <tr>
              <th>Gregorian</th>
              <th>Julian Day</th>
              <th>Dreamspell</th>
              <th>Venus</th>
              <th>Mars</th>
              <th>Thoth</th>
              <th>Long</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
      <div id="ft">
      </div>
    </div>
    <script src="../media/js/jquery.js"></script>
    <script src="/daycount.js/js/daycount.js"></script>
    <script type="text/javascript">
      var today = new daycount.moment();
      function appendMoreRows() {
        var start = new daycount.moment($('#start').val());
        if (start.isUnknown) return;
        var already = $('#data').find('tbody').find('tr').length;
        start = start.plus(already);
        var days = 100;
        var direction = $('input:radio[name=direction]:checked').val() == 'future' ? 1 : -1;
        calendar_days(start, days, direction);
      }
      function calendar_days(start, days, step) {
        var day = start;
        var html = '';
        for (var i = 0; i < days; i += 1)
        {
          var day = start.plus(i * step);
          html += '<tr>' +
            '<td>' + day.gregorian + '</td>' +
            '<td>' + day.localJulianDay + '</td>' +
            '<td>' + day.dreamspell + '</td>' +
            '<td>' + day.venus + '</td>' +
            '<td>' + day.mars + '</td>' +
            '<td>' + day.thoth + '</td>' +
            '<td>' + day.long + '</td>' +
            '</tr>';
        }
        $('#data').find('tbody').append(html);
      }
      $(function() {
        $('#hd input').change(function() {
          jQuery('#data').find('tbody').html('');
          appendMoreRows();
        });
        $(window).scroll(function() {
          if ($(window).scrollTop() == $(document).height() - $(window).height())
            appendMoreRows();
        });
        appendMoreRows();
      });
    </script>
  </body>
</html>
